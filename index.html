<!DOCTYPE HTML, lang="en">

<html>
<head>
    <title>Map | Home</title>
    <!-- Leaflet map css-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
     integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
     crossorigin=""/>
     <!-- Leaflet map js -->
     <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
     integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
     crossorigin=""></script>
     <!-- geoJson FeatureCollection of fatal data -->
     <script src="data/fatalData.js"></script>
     <!-- load geocoder for location -->
    <script src='https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js'></script>
    <link rel="stylesheet" type="text/css" href="css/colors-and-fonts.css">
    <link rel="stylesheet" type="text/css" href="css/header-styles.css">
    <link rel="stylesheet" type="text/css" href="css/popup-box.css">
    <link rel="stylesheet" type="text/css" href="css/body.css">
    <!--opacity control plugin-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.2/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.3.2/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-transparency@latest/leaflet-transparency.js"></script>
    <!--full-screen toggle-->
    <link href='Leaflet.fullscreen-gh-pages/dist/leaflet.fullscreen.css' rel='stylesheet' />
    <script src='Leaflet.fullscreen-gh-pages/dist/Leaflet.fullscreen.js'></script>
    <!-- dropdown button functions -->
    <script>
      function nextStep() {
        // start by removing all points
        var tileLayer = 'https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png'
        map.eachLayer(function (layer) {
          if (tileLayer != layer._url){map.removeLayer(layer)};});
        var script = document.createElement('script');
        script.src = "js/leaflet.iconSelect.js";
        document.head.appendChild(script)
      };
      function seeLoc() {
        var script = document.createElement('script');
        script.src = "js/geocode.js";
        document.head.appendChild(script)
      };
      function reCenter() {
        map.flyTo(bellyButton, 9)
      };
    </script>
</head>
<body>
    <header>
        <div class=container>
            <div class="header">
                <a href="index.html" class="title">Crash Map</a>
                <div class="header-right">
                    <a class="active" href="index.html">Home</a>
                    <a href="data.html">Data</a>
                    <a href="about-us.html">About Us</a>
                </div>
            </div>
        </div>
    </header>
    <div class = "slider-label">
        <img src="images/slider-label.png" alt="Add Map Labels">
    </div>
    <div class = "map-container">
        <div id ="mapid"></div>
        <div class = "info-window">
            <p class=info-window-info> For more information about where our data comes from, please navigate to our data page, which can be found here:<p>
            <a href="data.html" class="body-btn">Data</a>
        </div>
        <div class="toggles">
            <p class=toggle-info> Explore specific incidents using the dropdown menus below: <p>
            <form>
                <label> Type </label>
                <br>
                <select name = "mode" id = "mode">
                    <option value = "All"> All
                    </option>
                    <option value = "Pedestrian"> Pedestrian
                    </option>
                    <option value = "Bicycle"> Bicycle
                    </option>
                </select>
            </form>
            <form>
                <label> Year </label>
                <br>
                <select name = "year" id = "year">
                    <option value = "All"> All
                    </option>
                    <option value = "2009"> 2009
                    </option>
                    <option value = "2010"> 2010
                    </option>
                    <option value = "2011"> 2011
                    </option>
                    <option value = "2012"> 2012
                    </option>
                    <option value = "2013"> 2013
                    </option>
                    <option value = "2014"> 2014
                    </option>
                    <option value = "2015"> 2015
                    </option>
                    <option value = "2016"> 2016
                    </option>
                    <option value = "2017"> 2017
                    </option>
                    <option value = "2018"> 2018
                    </option>
                    <option value = "2019"> 2019
                    </option>
                    <option value = "2020"> 2020
                    </option>
                    <option value = "2021"> 2021
                    </option>
                </select>
            </form>
            <form>
                <label> Town </label>
                <br>
                <select name = "town" id = "town">
                    <option value = 'All'> All
                    </option>
                    <option value = 'Abington'> Abington
                    </option>
                    <option value = 'Acton'> Acton
                    </option>
                    <option value = 'Acushnet'> Acushnet
                    </option>
                    <option value = 'Adams'> Adams
                    </option>
                    <option value = 'Agawam'> Agawam
                    </option>
                    <option value = 'Alford'> Alford
                    </option>
                    <option value = 'Amesbury'> Amesbury
                    </option>
                    <option value = 'Amherst'> Amherst
                    </option>
                    <option value = 'Andover'> Andover
                    </option>
                    <option value = 'Aquinnah'> Aquinnah
                    </option>
                    <option value = 'Arlington'> Arlington
                    </option>
                    <option value = 'Ashburnham'> Ashburnham
                    </option>
                    <option value = 'Ashby'> Ashby
                    </option>
                    <option value = 'Ashfield'> Ashfield
                    </option>
                    <option value = 'Ashland'> Ashland
                    </option>
                    <option value = 'Athol'> Athol
                    </option>
                    <option value = 'Attleboro'> Attleboro
                    </option>
                    <option value = 'Auburn'> Auburn
                    </option>
                    <option value = 'Avon'> Avon
                    </option>
                    <option value = 'Ayer'> Ayer
                    </option>
                    <option value = 'Barnstable'> Barnstable
                    </option>
                    <option value = 'Barre'> Barre
                    </option>
                    <option value = 'Becket'> Becket
                    </option>
                    <option value = 'Bedford'> Bedford
                    </option>
                    <option value = 'Belchertown'> Belchertown
                    </option>
                    <option value = 'Bellingham'> Bellingham
                    </option>
                    <option value = 'Belmont'> Belmont
                    </option>
                    <option value = 'Berkley'> Berkley
                    </option>
                    <option value = 'Berlin'> Berlin
                    </option>
                    <option value = 'Bernardston'> Bernardston
                    </option>
                    <option value = 'Beverly'> Beverly
                    </option>
                    <option value = 'Billerica'> Billerica
                    </option>
                    <option value = 'Blackstone'> Blackstone
                    </option>
                    <option value = 'Blandford'> Blandford
                    </option>
                    <option value = 'Bolton'> Bolton
                    </option>
                    <option value = 'Boston'> Boston
                    </option>
                    <option value = 'Bourne'> Bourne
                    </option>
                    <option value = 'Boxborough'> Boxborough
                    </option>
                    <option value = 'Boxford'> Boxford
                    </option>
                    <option value = 'Boylston'> Boylston
                    </option>
                    <option value = 'Braintree'> Braintree
                    </option>
                    <option value = 'Brewster'> Brewster
                    </option>
                    <option value = 'Bridgewater'> Bridgewater
                    </option>
                    <option value = 'Brighton'> Brighton
                    </option>
                    <option value = 'Brimfield'> Brimfield
                    </option>
                    <option value = 'Brockton'> Brockton
                    </option>
                    <option value = 'Brookfield'> Brookfield
                    </option>
                    <option value = 'Brookline'> Brookline
                    </option>
                    <option value = 'Buckland'> Buckland
                    </option>
                    <option value = 'Burlington'> Burlington
                    </option>
                    <option value = 'Cambridge'> Cambridge
                    </option>
                    <option value = 'Canton'> Canton
                    </option>
                    <option value = 'Carlisle'> Carlisle
                    </option>
                    <option value = 'Carver'> Carver
                    </option>
                    <option value = 'Charlemont'> Charlemont
                    </option>
                    <option value = 'Charlestown'> Charlestown
                    </option>
                    <option value = 'Charlton'> Charlton
                    </option>
                    <option value = 'Chatham'> Chatham
                    </option>
                    <option value = 'Chelmsford'> Chelmsford
                    </option>
                    <option value = 'Chelsea'> Chelsea
                    </option>
                    <option value = 'Cheshire'> Cheshire
                    </option>
                    <option value = 'Chester'> Chester
                    </option>
                    <option value = 'Chesterfield'> Chesterfield
                    </option>
                    <option value = 'Chicopee'> Chicopee
                    </option>
                    <option value = 'Chilmark'> Chilmark
                    </option>
                    <option value = 'Clarksburg'> Clarksburg
                    </option>
                    <option value = 'Clinton'> Clinton
                    </option>
                    <option value = 'Cohasset'> Cohasset
                    </option>
                    <option value = 'Colrain'> Colrain
                    </option>
                    <option value = 'Concord'> Concord
                    </option>
                    <option value = 'Conway'> Conway
                    </option>
                    <option value = 'Cummington'> Cummington
                    </option>
                    <option value = 'Dalton'> Dalton
                    </option>
                    <option value = 'Dana'> Dana
                    </option>
                    <option value = 'Danvers'> Danvers
                    </option>
                    <option value = 'Dartmouth'> Dartmouth
                    </option>
                    <option value = 'Dedham'> Dedham
                    </option>
                    <option value = 'Deerfield'> Deerfield
                    </option>
                    <option value = 'Dennis'> Dennis
                    </option>
                    <option value = 'Dighton'> Dighton
                    </option>
                    <option value = 'Douglas'> Douglas
                    </option>
                    <option value = 'Dorchester'> Dorchester
                    </option>
                    <option value = 'Dover'> Dover
                    </option>
                    <option value = 'Dracut'> Dracut
                    </option>
                    <option value = 'Dudley'> Dudley
                    </option>
                    <option value = 'Dunstable'> Dunstable
                    </option>
                    <option value = 'Duxbury'> Duxbury
                    </option>
                    <option value = 'East Bridgewater'> East Bridgewater
                    </option>
                    <option value = 'East Brookfield'> East Brookfield
                    </option>
                    <option value = 'East Longmeadow'> East Longmeadow
                    </option>
                    <option value = 'Eastham'> Eastham
                    </option>
                    <option value = 'Easthampton'> Easthampton
                    </option>
                    <option value = 'Easton'> Easton
                    </option>
                    <option value = 'Edgartown'> Edgartown
                    </option>
                    <option value = 'Egremont'> Egremont
                    </option>
                    <option value = 'Enfield'> Enfield
                    </option>
                    <option value = 'Erving'> Erving
                    </option>
                    <option value = 'Essex'> Essex
                    </option>
                    <option value = 'Everett'> Everett
                    </option>
                    <option value = 'Fairhaven'> Fairhaven
                    </option>
                    <option value = 'Fall River'> Fall River
                    </option>
                    <option value = 'Falmouth'> Falmouth
                    </option>
                    <option value = 'Fitchburg'> Fitchburg
                    </option>
                    <option value = 'Florida'> Florida
                    </option>
                    <option value = 'Foxborough'> Foxborough
                    </option>
                    <option value = 'Framingham'> Framingham
                    </option>
                    <option value = 'Franklin'> Franklin
                    </option>
                    <option value = 'Freetown'> Freetown
                    </option>
                    <option value = 'Gardner'> Gardner
                    </option>
                    <option value = 'Georgetown'> Georgetown
                    </option>
                    <option value = 'Gill'> Gill
                    </option>
                    <option value = 'Gloucester'> Gloucester
                    </option>
                    <option value = 'Goshen'> Goshen
                    </option>
                    <option value = 'Gosnold'> Gosnold
                    </option>
                    <option value = 'Grafton'> Grafton
                    </option>
                    <option value = 'Granby'> Granby
                    </option>
                    <option value = 'Granville'> Granville
                    </option>
                    <option value = 'Great Barrington'> Great Barrington
                    </option>
                    <option value = 'Greenfield'> Greenfield
                    </option>
                    <option value = 'Greenwich'> Greenwich
                    </option>
                    <option value = 'Groton'> Groton
                    </option>
                    <option value = 'Groveland'> Groveland
                    </option>
                    <option value = 'Hadley'> Hadley
                    </option>
                    <option value = 'Halifax'> Halifax
                    </option>
                    <option value = 'Hamilton'> Hamilton
                    </option>
                    <option value = 'Hampden'> Hampden
                    </option>
                    <option value = 'Hancock'> Hancock
                    </option>
                    <option value = 'Hanover'> Hanover
                    </option>
                    <option value = 'Hanson'> Hanson
                    </option>
                    <option value = 'Hardwick'> Hardwick
                    </option>
                    <option value = 'Harvard'> Harvard
                    </option>
                    <option value = 'Harwich'> Harwich
                    </option>
                    <option value = 'Hatfield'> Hatfield
                    </option>
                    <option value = 'Haverhill'> Haverhill
                    </option>
                    <option value = 'Hawley'> Hawley
                    </option>
                    <option value = 'Heath'> Heath
                    </option>
                    <option value = 'Hingham'> Hingham
                    </option>
                    <option value = 'Hinsdale'> Hinsdale
                    </option>
                    <option value = 'Holbrook'> Holbrook
                    </option>
                    <option value = 'Holden'> Holden
                    </option>
                    <option value = 'Holland'> Holland
                    </option>
                    <option value = 'Holliston'> Holliston
                    </option>
                    <option value = 'Holyoke'> Holyoke
                    </option>
                    <option value = 'Hopedale'> Hopedale
                    </option>
                    <option value = 'Hopkinton'> Hopkinton
                    </option>
                    <option value = 'Hubbardston'> Hubbardston
                    </option>
                    <option value = 'Hudson'> Hudson
                    </option>
                    <option value = 'Hull'> Hull
                    </option>
                    <option value = 'Huntington'> Huntington
                    </option>
                    <option value = 'Hyde Park'> Hyde Park
                    </option>
                    <option value = 'Ipswich'> Ipswich
                    </option>
                    <option value = 'Kingston'> Kingston
                    </option>
                    <option value = 'Lakeville'> Lakeville
                    </option>
                    <option value = 'Lancaster'> Lancaster
                    </option>
                    <option value = 'Lanesborough '> Lanesborough 
                    </option>
                    <option value = 'Lawrence'> Lawrence
                    </option>
                    <option value = 'Lee'> Lee
                    </option>
                    <option value = 'Leicester'> Leicester
                    </option>
                    <option value = 'Lenox'> Lenox
                    </option>
                    <option value = 'Leominster'> Leominster
                    </option>
                    <option value = 'Leverett'> Leverett
                    </option>
                    <option value = 'Lexington'> Lexington
                    </option>
                    <option value = 'Leyden'> Leyden
                    </option>
                    <option value = 'Lincoln'> Lincoln
                    </option>
                    <option value = 'Littleton'> Littleton
                    </option>
                    <option value = 'Longmeadow'> Longmeadow
                    </option>
                    <option value = 'Lowell'> Lowell
                    </option>
                    <option value = 'Ludlow'> Ludlow
                    </option>
                    <option value = 'Lunenburg'> Lunenburg
                    </option>
                    <option value = 'Lynn'> Lynn
                    </option>
                    <option value = 'Lynnfield'> Lynnfield
                    </option>
                    <option value = 'Malden'> Malden
                    </option>
                    <option value = 'Manchester-By-The-Sea'> Manchester-By-The-Sea
                    </option>
                    <option value = 'Mansfield'> Mansfield
                    </option>
                    <option value = 'Marblehead'> Marblehead
                    </option>
                    <option value = 'Marion'> Marion
                    </option>
                    <option value = 'Marlborough'> Marlborough
                    </option>
                    <option value = 'Marshfield'> Marshfield
                    </option>
                    <option value = 'Mashpee'> Mashpee
                    </option>
                    <option value = 'Mattapoisett'> Mattapoisett
                    </option>
                    <option value = 'Maynard'> Maynard
                    </option>
                    <option value = 'Medfield'> Medfield
                    </option>
                    <option value = 'Medford'> Medford
                    </option>
                    <option value = 'Medway'> Medway
                    </option>
                    <option value = 'Melrose'> Melrose
                    </option>
                    <option value = 'Mendon'> Mendon
                    </option>
                    <option value = 'Merrimac'> Merrimac
                    </option>
                    <option value = 'Methuen'> Methuen
                    </option>
                    <option value = 'Middleborough'> Middleborough
                    </option>
                    <option value = 'Middlefield'> Middlefield
                    </option>
                    <option value = 'Middleton'> Middleton
                    </option>
                    <option value = 'Milford'> Milford
                    </option>
                    <option value = 'Millbury'> Millbury
                    </option>
                    <option value = 'Millis'> Millis
                    </option>
                    <option value = 'Millville'> Millville
                    </option>
                    <option value = 'Milton'> Milton
                    </option>
                    <option value = 'Monroe'> Monroe
                    </option>
                    <option value = 'Monson'> Monson
                    </option>
                    <option value = 'Montague'> Montague
                    </option>
                    <option value = 'Monterey'> Monterey
                    </option>
                    <option value = 'Montgomery'> Montgomery
                    </option>
                    <option value = 'Mount Washington'> Mount Washington
                    </option>
                    <option value = 'Nahant'> Nahant
                    </option>
                    <option value = 'Nantucket'> Nantucket
                    </option>
                    <option value = 'Natick'> Natick
                    </option>
                    <option value = 'Needham'> Needham
                    </option>
                    <option value = 'New Ashford'> New Ashford
                    </option>
                    <option value = 'New Bedford'> New Bedford
                    </option>
                    <option value = 'New Braintree'> New Braintree
                    </option>
                    <option value = 'New Marlborough'> New Marlborough
                    </option>
                    <option value = 'New Salem'> New Salem
                    </option>
                    <option value = 'Newbury'> Newbury
                    </option>
                    <option value = 'Newburyport'> Newburyport
                    </option>
                    <option value = 'Newton'> Newton
                    </option>
                    <option value = 'Norfolk'> Norfolk
                    </option>
                    <option value = 'North Adams'> North Adams
                    </option>
                    <option value = 'North Andover'> North Andover
                    </option>
                    <option value = 'North Attleborough'> North Attleborough
                    </option>
                    <option value = 'North Brookfield'> North Brookfield
                    </option>
                    <option value = 'North Reading'> North Reading
                    </option>
                    <option value = 'Northampton'> Northampton
                    </option>
                    <option value = 'Northborough'> Northborough
                    </option>
                    <option value = 'Northbridge'> Northbridge
                    </option>
                    <option value = 'Northfield'> Northfield
                    </option>
                    <option value = 'Norton'> Norton
                    </option>
                    <option value = 'Norwell'> Norwell
                    </option>
                    <option value = 'Norwood'> Norwood
                    </option>
                    <option value = 'Oak Bluffs'> Oak Bluffs
                    </option>
                    <option value = 'Oakham'> Oakham
                    </option>
                    <option value = 'Orange'> Orange
                    </option>
                    <option value = 'Orleans'> Orleans
                    </option>
                    <option value = 'Otis'> Otis
                    </option>
                    <option value = 'Oxford'> Oxford
                    </option>
                    <option value = 'Palmer'> Palmer
                    </option>
                    <option value = 'Paxton'> Paxton
                    </option>
                    <option value = 'Peabody'> Peabody
                    </option>
                    <option value = 'Pelham'> Pelham
                    </option>
                    <option value = 'Pembroke'> Pembroke
                    </option>
                    <option value = 'Pepperell'> Pepperell
                    </option>
                    <option value = 'Peru'> Peru
                    </option>
                    <option value = 'Petersham'> Petersham
                    </option>
                    <option value = 'Phillipston'> Phillipston
                    </option>
                    <option value = 'Pittsfield'> Pittsfield
                    </option>
                    <option value = 'Plainfield'> Plainfield
                    </option>
                    <option value = 'Plainville'> Plainville
                    </option>
                    <option value = 'Plymouth'> Plymouth
                    </option>
                    <option value = 'Plympton'> Plympton
                    </option>
                    <option value = 'Prescott'> Prescott
                    </option>
                    <option value = 'Princeton'> Princeton
                    </option>
                    <option value = 'Provincetown'> Provincetown
                    </option>
                    <option value = 'Quincy'> Quincy
                    </option>
                    <option value = 'Randolph'> Randolph
                    </option>
                    <option value = 'Raynham'> Raynham
                    </option>
                    <option value = 'Reading'> Reading
                    </option>
                    <option value = 'Rehoboth'> Rehoboth
                    </option>
                    <option value = 'Revere'> Revere
                    </option>
                    <option value = 'Richmond'> Richmond
                    </option>
                    <option value = 'Rochester'> Rochester
                    </option>
                    <option value = 'Rockland'> Rockland
                    </option>
                    <option value = 'Rockport'> Rockport
                    </option>
                    <option value = 'Rowe'> Rowe
                    </option>
                    <option value = 'Rowley'> Rowley
                    </option>
                    <option value = 'Roxbury'> Roxbury
                    </option>
                    <option value = 'Royalston'> Royalston
                    </option>
                    <option value = 'Russell'> Russell
                    </option>
                    <option value = 'Rutland'> Rutland
                    </option>
                    <option value = 'Salem'> Salem
                    </option>
                    <option value = 'Salisbury'> Salisbury
                    </option>
                    <option value = 'Sandisfield'> Sandisfield
                    </option>
                    <option value = 'Sandwich'> Sandwich
                    </option>
                    <option value = 'Saugus'> Saugus
                    </option>
                    <option value = 'Savoy'> Savoy
                    </option>
                    <option value = 'Scituate'> Scituate
                    </option>
                    <option value = 'Seekonk'> Seekonk
                    </option>
                    <option value = 'Sharon'> Sharon
                    </option>
                    <option value = 'Sheffield'> Sheffield
                    </option>
                    <option value = 'Shelburne'> Shelburne
                    </option>
                    <option value = 'Sherborn'> Sherborn
                    </option>
                    <option value = 'Shirley'> Shirley
                    </option>
                    <option value = 'Shrewsbury'> Shrewsbury
                    </option>
                    <option value = 'Shutesbury'> Shutesbury
                    </option>
                    <option value = 'Somerset'> Somerset
                    </option>
                    <option value = 'Somerville'> Somerville
                    </option>
                    <option value = 'South Hadley'> South Hadley
                    </option>
                    <option value = 'Southampton'> Southampton
                    </option>
                    <option value = 'Southborough'> Southborough
                    </option>
                    <option value = 'Southbridge'> Southbridge
                    </option>
                    <option value = 'Southwick'> Southwick
                    </option>
                    <option value = 'Spencer'> Spencer
                    </option>
                    <option value = 'Springfield'> Springfield
                    </option>
                    <option value = 'Sterling'> Sterling
                    </option>
                    <option value = 'Stockbridge'> Stockbridge
                    </option>
                    <option value = 'Stoneham'> Stoneham
                    </option>
                    <option value = 'Stoughton'> Stoughton
                    </option>
                    <option value = 'Stow'> Stow
                    </option>
                    <option value = 'Sturbridge'> Sturbridge
                    </option>
                    <option value = 'Sudbury'> Sudbury
                    </option>
                    <option value = 'Sunderland'> Sunderland
                    </option>
                    <option value = 'Sutton'> Sutton
                    </option>
                    <option value = 'Swampscott'> Swampscott
                    </option>
                    <option value = 'Swansea'> Swansea
                    </option>
                    <option value = 'Taunton'> Taunton
                    </option>
                    <option value = 'Templeton'> Templeton
                    </option>
                    <option value = 'Tewksbury'> Tewksbury
                    </option>
                    <option value = 'Tisbury'> Tisbury
                    </option>
                    <option value = 'Tolland'> Tolland
                    </option>
                    <option value = 'Topsfield'> Topsfield
                    </option>
                    <option value = 'Townsend'> Townsend
                    </option>
                    <option value = 'Truro'> Truro
                    </option>
                    <option value = 'Tyngsborough'> Tyngsborough
                    </option>
                    <option value = 'Tyringham'> Tyringham
                    </option>
                    <option value = 'Upton'> Upton
                    </option>
                    <option value = 'Uxbridge'> Uxbridge
                    </option>
                    <option value = 'Wakefield'> Wakefield
                    </option>
                    <option value = 'Wales'> Wales
                    </option>
                    <option value = 'Walpole'> Walpole
                    </option>
                    <option value = 'Waltham'> Waltham
                    </option>
                    <option value = 'Ware'> Ware
                    </option>
                    <option value = 'Wareham'> Wareham
                    </option>
                    <option value = 'Warren'> Warren
                    </option>
                    <option value = 'Warwick'> Warwick
                    </option>
                    <option value = 'Washington'> Washington
                    </option>
                    <option value = 'Watertown'> Watertown
                    </option>
                    <option value = 'Wayland'> Wayland
                    </option>
                    <option value = 'Webster'> Webster
                    </option>
                    <option value = 'Wellesley'> Wellesley
                    </option>
                    <option value = 'Wellfleet'> Wellfleet
                    </option>
                    <option value = 'Wendell'> Wendell
                    </option>
                    <option value = 'Wenham'> Wenham
                    </option>
                    <option value = 'West Boylston'> West Boylston
                    </option>
                    <option value = 'West Bridgewater'> West Bridgewater
                    </option>
                    <option value = 'West Brookfield'> West Brookfield
                    </option>
                    <option value = 'West Newbury'> West Newbury
                    </option>
                    <option value = 'West Roxbury'> West Roxbury
                    </option>
                    <option value = 'West Springfield'> West Springfield
                    </option>
                    <option value = 'West Stockbridge'> West Stockbridge
                    </option>
                    <option value = 'West Tisbury'> West Tisbury
                    </option>
                    <option value = 'Westborough'> Westborough
                    </option>
                    <option value = 'Westfield'> Westfield
                    </option>
                    <option value = 'Westford'> Westford
                    </option>
                    <option value = 'Westhampton'> Westhampton
                    </option>
                    <option value = 'Westminster'> Westminster
                    </option>
                    <option value = 'Weston'> Weston
                    </option>
                    <option value = 'Westport'> Westport
                    </option>
                    <option value = 'Westwood'> Westwood
                    </option>
                    <option value = 'Weymouth'> Weymouth
                    </option>
                    <option value = 'Whately'> Whately
                    </option>
                    <option value = 'Whitman'> Whitman
                    </option>
                    <option value = 'Wilbraham'> Wilbraham
                    </option>
                    <option value = 'Williamsburg'> Williamsburg
                    </option>
                    <option value = 'Williamstown'> Williamstown
                    </option>
                    <option value = 'Wilmington'> Wilmington
                    </option>
                    <option value = 'Winchendon'> Winchendon
                    </option>
                    <option value = 'Winchester'> Winchester
                    </option>
                    <option value = 'Windsor'> Windsor
                    </option>
                    <option value = 'Winthrop'> Winthrop
                    </option>
                    <option value = 'Woburn'> Woburn
                    </option>
                    <option value = 'Worcester'> Worcester
                    </option>
                    <option value = 'Worthington'> Worthington
                    </option>
                    <option value = 'Wrentham'> Wrentham
                    </option>
                    <option value = 'Yarmouth'> Yarmouth
                    </option>
                </select>
            </form>
            <div>
              <button class="button" onclick="nextStep()">Redraw Map</button>
            </div>
            <div>
              <button class="button" onclick="seeLoc()">Zoom to Location</button>
            </div>
            <div>
              <button class="button" onclick="reCenter()">Re-Center Map</button>
            </div>
        </div>
    </div>

    <div id="box" class="popup">
        <div class="popup-content">
            <div class="popup-header">
                <span class="close">&times;</span>
                <h2>Welcome!</h2>
            </div>
            <div class="popup-body">
                <p><b>Spring 2021</b><p>
                <p>The Vision Zero movement seeks to re-design roadways to be safe and comfortable for all users. Vision Zero design standards prioritize the safety of all users as opposed to accommodating the greatest volume of motorists. Vision Zero was conceived and signed into law in Sweden in 1997. In 2019, Oslo Norway was the first major city to achieve zero traffic fatalities for vulnerable roadway users. Vulnerable roadway users are primarily pedestrians and bicyclists, but also include wheelchair users and those using micro mobility.</p>
                <p>The Massachusetts Vision Zero Coalition advocates for Vision Zero design standards on Beacon Hill and in the Commonwealth’s 351 municipalities. As part of their advocacy, they track pedestrian and bicyclist fatalities based on media accounts. The fatalities are visualized on their website. The visualization is accomplished using Google My Maps. Current Massachusetts vulnerable user fatalities exceed the number of points allowed by Google My Maps. The Massachusetts Vision Zero Coalition, being a collaborative of non-profits, does not have the inhouse expertise nor the funds to migrate the current visualization to a more robust platform.</p>
                <p>Using data provided by the Massachusetts Vision Zero Coalition, this map attempts to visualise the surplus of cases where people have died as a product of road violence across Massachusetts. Feel free to explore the map, and specify specific indicators that you want to visualise in the dropdown menus on the top right.</p>
                <div class=about-link-div>
                <a href="about-us.html" class="body-btn">About the creators</a>
                </div>
                <p></p>
            </div>
        </div>
    </div>
</body>
<script src=js/popup-box.js></script>
<script>
  const bellyButton = { lat: 42.08, lng: -71.67 };  // Center of MA

  var opts = {
    otmLayer: {
      url: 'https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png',
      options: {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
      	subdomains: 'abcd',
      	maxZoom: 20
      },
    },
    trafficLayer: {
      url: 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',
      options: {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: 'abcd',
      	maxZoom: 20
      },
    },
    opacityBaseControl: {
      options: {
        sliderImageUrl:"",
        backgroundColor: "rgba(0, 0, 0, 0.9)",
        opacity: 1,
        position: 'topleft'
      },
    },
    opacityOverlayControl: {
      options: {
        sliderImageUrl: "images/opacity-slider2.png",
        backgroundColor: "rgba(229, 227, 223, 0.9)",
        opacity: 1,
        position: 'topleft'
      },
    },
  };

  //  traffic layer test - there is a permission issue with this layer
  var traffic_layer = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?pk.eyJ1IjoiemFpbmFiZmFyaWQiLCJhIjoiY2t2MmhjdTVrODZjejJ6bW44M2sxb3huciJ9.c9VkMw-9GGC_82nFGsDLDw', {
  	attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
            '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
            'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  	id: 'mapbox.mapbox-traffic-v1',
  	maxZoom: 18
  });

  //  basemap with labels
  var CartoDB_DarkMatter = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
  	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
  	subdomains: 'abcd',
  	maxZoom: 20
  });

  // no label option for dark map - just need to change .addTo(map) below var map =
  var CartoDB_DarkMatterNoLabels = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 20
  });
  var map = L.map("mapid", opts.map).setView(bellyButton, 9);
  CartoDB_DarkMatterNoLabels.addTo(map);

  var layer = new L.TileLayer(opts.otmLayer.url, opts.otmLayer.options);
  var overlay = new L.TileLayer(opts.trafficLayer.url, opts.trafficLayer.options);
  var controlBaseOpacity = new L.Control.OpacitySlider(null, opts.opacityBaseControl.options);
  var controlOverlayOpacity = new L.Control.OpacitySlider(overlay, opts.opacityOverlayControl.options);

  controlBaseOpacity.addTo(map);   // keeps space open for a label above Opacity Control
  controlOverlayOpacity.addTo(map);

  layer.addTo(map);
  map.addControl(new L.Control.Fullscreen());

</script>
<script src=js/leaflet.popups.js></script>
</html>
